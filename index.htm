---
layout: default
---

<h1>Inputs</h1>

<h2>Positive Test Rate</h2> 

<p>The fraction of tests that are expected to come out as positive based on historical and other data. Use fraction (say 0.02) instead of % (say 2%).</p>

<h2>Pool Size (Optional)</h2>

<p>Current size of the pool for which optimal splitting is to be calculated, if the pooled test turns out positive.</p>

<h1>Calculator</h1>

<input type="text" placeholder="Positive Test Rate" id="i">
<input type="text" placeholder="Pool Size (Optional)" id="t">
<button type="button" onclick="main();">Calculate</button>
<br><br>

<div id="result"></div>

<script>
  
function poolsize (i) { 
	return Math.floor(Math.log(0.5)/Math.log(1-i));
}

function cir (i, s) {
	return (i/(1-Math.pow((1-i),s)));
}
	
function main () {
 
	var i = document.getElementById("i").value;
	var t = document.getElementById("t").value;;
	var s = poolsize(i);
	var parts;
	var q, r;
	var j;
	
	var out = document.getElementById("result");
	out.innerHTML = '<h3>Optimal number of samples that can be pooled for testing is <strong>'+s+'</strong>, assuming the Positive Test Rate to be <strong>'+i+'</strong> and assuming no dilution due to pooling.</h3>';
	out.appendChild(document.createElement('br'));
	out.appendChild(document.createElement('br'));

	s = poolsize(cir(i,t));
	parts = Math.ceil(t/s);
	q = Math.floor(t/parts);
	r = t%parts;

	out.innerHTML += 's='+s+' parts='+parts+' q='+q+' r='+r;

	for (j=0;j<parts;j++) {
		if (r != 0) {
			out.innerHTML += q+1+' ';			
			r--;
		}
		else {
			out.innerHTML += q+' ';
		}
	}
	
}
	
</script> 
